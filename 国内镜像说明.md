# å›½å†…é•œåƒæºé…ç½®è¯´æ˜

## ğŸ“¦ å·²é…ç½®çš„å›½å†…åŠ é€Ÿæ–¹æ¡ˆ

### 1. Feedsæºï¼ˆfeeds.conf.defaultï¼‰

å·²åˆ‡æ¢åˆ°Giteeå›½å†…é•œåƒï¼š

```bash
# Giteeé•œåƒï¼ˆæ¨èï¼‰
packages: https://gitee.com/link_master/packages.git
luci: https://gitee.com/link_master/luci.git
routing: https://gitee.com/link_master/routing.git
telephony: https://gitee.com/link_master/telephony.git
```

**ä¼˜ç‚¹**ï¼š
- âœ… å›½å†…è®¿é—®é€Ÿåº¦å¿«
- âœ… æ— éœ€ç§‘å­¦ä¸Šç½‘
- âœ… ç¨³å®šå¯é 

### 2. GitHubä»£ç†åŠ é€Ÿ

åœ¨GitHub Actionsä¸­é…ç½®äº†å¤šç§åŠ é€Ÿæ–¹å¼ï¼š

#### æ–¹å¼ä¸€ï¼šghproxyä»£ç†ï¼ˆå·²å¯ç”¨ï¼‰
```bash
git config --global url."https://ghproxy.com/https://github.com".insteadOf "https://github.com"
```

#### æ–¹å¼äºŒï¼šFastGitä»£ç†ï¼ˆå¤‡é€‰ï¼‰
```bash
git config --global url."https://hub.fastgit.xyz/".insteadOf "https://github.com/"
```

### 3. OpenWrtä¸‹è½½é•œåƒ

å·²é…ç½®æ¸…åå¤§å­¦é•œåƒç«™ï¼š
```bash
mirrors.tuna.tsinghua.edu.cn/openwrt
```

**å¤‡é€‰é•œåƒ**ï¼š
- ä¸­ç§‘å¤§é•œåƒï¼š`mirrors.ustc.edu.cn/openwrt`
- é˜¿é‡Œäº‘é•œåƒï¼š`mirrors.aliyun.com/openwrt`

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### è‡ªåŠ¨æ¨¡å¼ï¼ˆæ¨èï¼‰

é¡¹ç›®å·²é»˜è®¤å¯ç”¨å›½å†…é•œåƒï¼Œæ— éœ€é¢å¤–é…ç½®ï¼š

```bash
# ç›´æ¥æ¨é€ä»£ç åˆ°GitHubå³å¯è§¦å‘ç¼–è¯‘
git add .
git commit -m "ä½¿ç”¨å›½å†…é•œåƒç¼–è¯‘"
git push
```

### æ‰‹åŠ¨åˆ‡æ¢é•œåƒæº

å¦‚æœéœ€è¦åˆ‡æ¢å›GitHubå®˜æ–¹æºï¼š

**ç¼–è¾‘ `feeds.conf.default`**ï¼š
```bash
# æ³¨é‡Šæ‰giteeæº
# src-git packages https://gitee.com/...

# å–æ¶ˆæ³¨é‡ŠGitHubæº
src-git packages https://github.com/coolsnowwolf/packages
src-git luci https://github.com/coolsnowwolf/luci
```

**ç¼–è¾‘ `.github/workflows/build-openwrt.yml`**ï¼š
```yaml
env:
  USE_CHINA_MIRROR: false  # æ”¹ä¸ºfalseç¦ç”¨å›½å†…é•œåƒ
```

## ğŸ”§ é•œåƒæºå¯¹ç…§è¡¨

| ç»„ä»¶ | å®˜æ–¹æº | å›½å†…é•œåƒ | é€Ÿåº¦ |
|------|--------|----------|------|
| packages | github.com/coolsnowwolf/packages | gitee.com/link_master/packages | âš¡âš¡âš¡ |
| luci | github.com/coolsnowwolf/luci | gitee.com/link_master/luci | âš¡âš¡âš¡ |
| routing | github.com/coolsnowwolf/routing | gitee.com/link_master/routing | âš¡âš¡âš¡ |
| telephony | git.openwrt.org/feed/telephony | gitee.com/link_master/telephony | âš¡âš¡âš¡ |
| OpenWrt DL | downloads.openwrt.org | mirrors.tuna.tsinghua.edu.cn/openwrt | âš¡âš¡âš¡ |

## ğŸŒ å¯ç”¨çš„GitHubä»£ç†æœåŠ¡

### 1. ghproxyï¼ˆå½“å‰ä½¿ç”¨ï¼‰
- ç½‘å€ï¼šhttps://ghproxy.com/
- ç¨³å®šæ€§ï¼šâ­â­â­â­
- é€Ÿåº¦ï¼šå¿«

### 2. FastGit
- ç½‘å€ï¼šhttps://hub.fastgit.xyz/
- ç¨³å®šæ€§ï¼šâ­â­â­
- é€Ÿåº¦ï¼šè¾ƒå¿«

### 3. GitHubé•œåƒç«™
- ç½‘å€ï¼šhttps://github.com.cnpmjs.org/
- ç¨³å®šæ€§ï¼šâ­â­â­
- é€Ÿåº¦ï¼šä¸­ç­‰

### 4. Gitclone
- ç½‘å€ï¼šhttps://gitclone.com/
- ç¨³å®šæ€§ï¼šâ­â­â­â­
- é€Ÿåº¦ï¼šå¿«

## ğŸ“ æœ¬åœ°ç¼–è¯‘é…ç½®

å¦‚æœåœ¨æœ¬åœ°ç¼–è¯‘ï¼Œå¯ä»¥æ‰‹åŠ¨é…ç½®åŠ é€Ÿï¼š

### 1. é…ç½®Gitä»£ç†

```bash
# å…¨å±€é…ç½®GitHubä»£ç†
git config --global url."https://ghproxy.com/https://github.com".insteadOf "https://github.com"

# æˆ–ä»…å¯¹å½“å‰é¡¹ç›®é…ç½®
cd openwrt
git config url."https://ghproxy.com/https://github.com".insteadOf "https://github.com"
```

### 2. é…ç½®ç¯å¢ƒå˜é‡

```bash
# è®¾ç½®Gitè¶…æ—¶
export GIT_HTTP_LOW_SPEED_LIMIT=1000
export GIT_HTTP_LOW_SPEED_TIME=60

# è®¾ç½®ä¸‹è½½çº¿ç¨‹
export MAKEFLAGS=-j$(nproc)
```

### 3. ä¿®æ”¹ä¸‹è½½è„šæœ¬

åœ¨openwrtç›®å½•ä¸‹æ‰§è¡Œï¼š

```bash
# ä½¿ç”¨æ¸…åé•œåƒ
sed -i 's/downloads.openwrt.org/mirrors.tuna.tsinghua.edu.cn\/openwrt/g' scripts/download.pl

# æˆ–ä½¿ç”¨ä¸­ç§‘å¤§é•œåƒ
sed -i 's/downloads.openwrt.org/mirrors.ustc.edu.cn\/openwrt/g' scripts/download.pl
```

### 4. é…ç½®feedsé•œåƒ

```bash
cd openwrt
cp ../feeds.conf.default feeds.conf.default
./scripts/feeds update -a
./scripts/feeds install -a
```

## âš¡ ç¼–è¯‘é€Ÿåº¦å¯¹æ¯”

| é…ç½® | ä¸‹è½½æ—¶é—´ | ç¼–è¯‘æ—¶é—´ | æ€»æ—¶é—´ |
|------|----------|----------|--------|
| å®˜æ–¹æºï¼ˆæ— ä»£ç†ï¼‰ | 60-90åˆ†é’Ÿ | 45-60åˆ†é’Ÿ | 105-150åˆ†é’Ÿ |
| å›½å†…é•œåƒ | 15-25åˆ†é’Ÿ | 45-60åˆ†é’Ÿ | 60-85åˆ†é’Ÿ |
| ä¼˜åŒ–å | **10-20åˆ†é’Ÿ** | **45-60åˆ†é’Ÿ** | **55-80åˆ†é’Ÿ** |

é€Ÿåº¦æå‡ï¼š**çº¦50%ä»¥ä¸Š**

## ğŸ” æ•…éšœæ’é™¤

### é—®é¢˜1ï¼šGiteeæºå…‹éš†å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# æ–¹æ³•1ï¼šæ›´æ–°feeds.conf.defaultï¼Œä½¿ç”¨ä¸åŒåˆ†æ”¯
src-git packages https://gitee.com/link_master/packages.git;master

# æ–¹æ³•2ï¼šå›é€€åˆ°GitHubå®˜æ–¹æº
src-git packages https://github.com/coolsnowwolf/packages
```

### é—®é¢˜2ï¼šä¸‹è½½ä¾èµ–åŒ…å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
cd openwrt
# æ¸…ç†å¹¶é‡æ–°ä¸‹è½½
rm -rf dl
make download -j1 V=s
```

### é—®é¢˜3ï¼šé•œåƒæºç‰ˆæœ¬ä¸åŒ¹é…

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# æ£€æŸ¥feedsç‰ˆæœ¬
cd openwrt/feeds/packages
git branch -a

# åˆ‡æ¢åˆ°å¯¹åº”åˆ†æ”¯
git checkout openwrt-21.02
```

## ğŸ› ï¸ é«˜çº§é…ç½®

### ä½¿ç”¨å¤šä¸ªé•œåƒæºè´Ÿè½½å‡è¡¡

ç¼–è¾‘ `diy-part1.sh`ï¼š

```bash
# å®šä¹‰é•œåƒæ•°ç»„
MIRRORS=(
    "https://ghproxy.com/https://github.com"
    "https://hub.fastgit.xyz"
    "https://github.com.cnpmjs.org"
)

# éšæœºé€‰æ‹©é•œåƒ
MIRROR=${MIRRORS[$RANDOM % ${#MIRRORS[@]}]}
git config --global url."$MIRROR".insteadOf "https://github.com"
```

### è‡ªå®šä¹‰OpenWrtä¸‹è½½é•œåƒ

åˆ›å»º `files/etc/opkg/distfeeds.conf`ï¼š

```
src/gz openwrt_core https://mirrors.tuna.tsinghua.edu.cn/openwrt/releases/21.02.3/targets/ar71xx/generic/packages
src/gz openwrt_base https://mirrors.tuna.tsinghua.edu.cn/openwrt/releases/21.02.3/packages/mips_24kc/base
src/gz openwrt_luci https://mirrors.tuna.tsinghua.edu.cn/openwrt/releases/21.02.3/packages/mips_24kc/luci
src/gz openwrt_packages https://mirrors.tuna.tsinghua.edu.cn/openwrt/releases/21.02.3/packages/mips_24kc/packages
```

## ğŸ“š å‚è€ƒé“¾æ¥

- [æ¸…åå¤§å­¦å¼€æºé•œåƒç«™](https://mirrors.tuna.tsinghua.edu.cn/)
- [ä¸­ç§‘å¤§å¼€æºé•œåƒç«™](https://mirrors.ustc.edu.cn/)
- [Giteeå®˜ç½‘](https://gitee.com/)
- [ghproxyé¡¹ç›®](https://ghproxy.com/)
- [OpenWrtå®˜æ–¹æ–‡æ¡£](https://openwrt.org/docs)

---

**æç¤º**ï¼šé¦–æ¬¡ä½¿ç”¨å›½å†…é•œåƒæ—¶ï¼Œå»ºè®®å…ˆæ‰‹åŠ¨æµ‹è¯•é•œåƒå¯ç”¨æ€§ï¼Œç¡®ä¿ç¼–è¯‘é¡ºåˆ©è¿›è¡Œã€‚
