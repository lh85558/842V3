# CUPS服务器配置 - AR9531 64MB RAM优化版本
# 最小化内存占用和日志

# 日志级别（仅错误）
LogLevel error
MaxLogSize 0
ErrorLog syslog

# 限制并发和作业大小
MaxJobs 3
MaxJobsPerPrinter 2
MaxJobsPerUser 2
MaxJobSize 5120

# 不保留作业历史（节省内存）
PreserveJobHistory Off
PreserveJobFiles Off
MaxJobTime 300

# 内存限制
RIPCache 8m

# 禁用浏览（节省内存）
Browsing Off
BrowseLocalProtocols none

# 系统组
SystemGroup lpadmin

# 监听所有接口
Port 631
Listen /var/run/cups/cups.sock

# 访问控制
DefaultAuthType Basic
WebInterface Yes

<Location />
  Order allow,deny
  Allow all
</Location>

<Location /admin>
  Order allow,deny
  Allow all
</Location>

<Location /admin/conf>
  AuthType Default
  Require user @SYSTEM
  Order allow,deny
  Allow all
</Location>

<Policy default>
  JobPrivateAccess default
  JobPrivateValues default
  SubscriptionPrivateAccess default
  SubscriptionPrivateValues default
  
  <Limit All>
    Order deny,allow
    Allow all
  </Limit>
</Policy>

<Policy authenticated>
  JobPrivateAccess default
  JobPrivateValues default
  SubscriptionPrivateAccess default
  SubscriptionPrivateValues default
  
  <Limit All>
    Order deny,allow
    Allow all
  </Limit>
</Policy>

